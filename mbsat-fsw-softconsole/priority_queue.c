//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// MBSATS 2019-2020
//
// Repository:
//  ManitobaSat-Flight-Software
//
// File Description:
//  Priority queue for any payload.
//
// History
// 2019-10-01 Eric Kapilik
// - Created. See https://www.geeksforgeeks.org/priority-queue-using-linked-list/.
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// INCLUDES
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "priority_queue.h"

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// DEFINITIONS AND MACROS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// ENUMS AND ENUM TYPEDEFS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// STRUCTS AND STRUCT TYPEDEFS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
typedef struct node {
	long priority;
	struct node* next;
	void* data;
} Node;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// TYPEDEFS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTION PROTOTYPES
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// Description:
//  Create new node for linked list with given data pointer and given priority.
//
// Parameters:
//	data - the data (stored as pointer)
//  priority - the priority of the node, lower number is higher priority. (i.e., 0 is highest priority)
// Returns:
//  Pointer to a new node structure
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
Node* newNode(void* data, long priority);

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTIONS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------


//-------------------------------------------------------------------------------------------------------------------------------------------------------------
Node* newNode(void* data, long priority){
	Node* temp = (Node*)malloc(sizeof(Node));
	temp->data = data;
	temp->priority = priority;
	temp->next = NULL;

	return temp;
}

void vTaskTest_Priority_Queue(void *pvParameters){
	// Test newNode constructor
	int expected_number = 123456;
	int *data = &expected_number;
	Node* myNode = newNode(data, 0);
	while(*((int*)(myNode->data)) != number){}; // will spin here if test fails
	for( ;; ) {
	}
}
